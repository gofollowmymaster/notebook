## 表单数据的加密传输



### 一、表单数据的提交方式选择

​       常用的与服务器进行的交互方式是GET和POST（关于两者的区别[此处](http://blog.csdn.net/gideal_wang/archive/2009/07/02/4316691.aspx)有详细的介绍），而一般在表单的数据提交中，都会选择POST方式，因为使用GET方法数据是通过URL传递的，在地址栏中会直接看到传递的数据，这样就缺少安全性。而使用POST传递时，是把提交的数据放置在HTTP包的包体中，地址栏不会看到数据。但是这样处理就能确保提交数据的安全性吗？

 

![img](http://hi.csdn.net/attachment/201010/26/0_1288104066AceO.gif)

 

### 二、web数据传递的不安全性

​        客户要浏览web网页，都是先连接web服务器，请求该网页文件，下载到本地再由浏览器解释执行最终看到丰富多彩的网页。http协议的这种工作模式，决定了web数据面向客户是开放的，实际http包在网络中也是通过明文传递的，通过一些抓包软件很容易捕捉到http包，自然也能得到用户提交的web数据。如右图是用wireshark抓到人人网登录时传递的数据包，从捕获的数据包中可以发现使用的是post方法提交数据，但从http包的包体中很容易找到提交的账号及密码，这样用户的信息在网络上进行传递时很容易被窃取。

### 三、用RSA加密web数据

​      为了提高web数据传递的安全性，故在数据在网络上进行传递之前必须进行加密处理，如使用[https](http://baike.baidu.com/view/14121.htm)进行web数据的完全加密传输，但是因为https是对所有的数据进行加密这样就影响了网页的浏览速率，况且有时只需对关键数据进行加密保护。这时就需要一些小规模的数据加密传输解决方法，[此文](http://march4.blog.163.com/blog/static/127229581201012710928554/)提供了一种用[RSA](http://www.emc.com/domains/rsa/index.htm)加密算法加密web数据，具体是在客户端用js脚本使用公钥加密数据，再在服务器端用PHP脚本程序使用私钥解密数据。在这为什么要使用非对称的加密算法RSA，为什么不使用加解密效率更快的对称加密算法如AES，DES，我个人认为是因为对称加密算法加密和解密使用的是同一密钥，而web文件都是下载到本地再解释执行的，这样再客户端的加密脚本程序很容易被用户看到同时也容易泄漏密钥，使用对称加密算法加密的数据也就丧失了安全性，但是使用非对称加密算法，只有私钥能解密出公钥加密的数据，所以只要确保私钥的保密性，就能确保经过公钥加密数据的安全性。

### 四、完善的加密传输方法

​      如果使用RSA加密传输web数据，每次会话使用的都是同一密钥对，则可能存在非法用户冒充攻击，非法用户截获到用户向服务器提交的数据，虽是加密后的数据，但非法用户仍然可以直接向服务器POST截获到的加密后的数据，服务器端一但解密验证通过，则非法用户达到冒充合法用户的目的。这就是因为每次会话使用的是同一密钥，使每次登陆时提交的用户数据都是一样的，即使被加密，加密后的数据也是一样的，从而存在非法用户冒充合法用户的可能。解决这个问题的一个好的方法是没次会话使用不同的密钥对，这样即使非法用户再次提交加密后的数据，由于两次会话使用的是不同的密钥对，使得提交的数据在服务器端不能正确解密，从而验证出错。在用户登录时的具体实现是用户在提交数据前客户端先异步请求服务端生成本次会话密钥，并向客户端返回公钥，客户端再用公钥加密数据提交给服务端，服务端用私钥解密验证完后注销此次会话密钥。这样就确保用本次会话公钥加密的数据再次被提交到服务器端时服务端因使用的不是与之配对的私钥，不能解密出正确的数据从而验证失败，有效地避免了非法用户的冒充攻击。

### 五、对百度登陆接口的观察

**传输协议** :https

**传输数据**:  输入用户名  密码 分别为 123  123  传输请求数据为
username: 123
password: VY2h1M7m8cIzxXSJBfhUfAIG9cwtnB6qin8TuVWM0haqPx8HgtFW476bgPi1E2jvJT2RD2W2IKGwoHfOqsIcFO3vO/dRu1gb2V7559VXns/o4ZJQ/nMh34AXo3Vy8Gqr4wQOdKJXVj83LVX+AbfMJp5vvKjDJPJV5vVWZ1w0Ztg=

且每次请求的密码串还不同   其实就是每次使用不同的密钥对

> 由于该密钥对只是对表单数据进行加密,不涉及https那样的浏览器安全验证.所以可以没次由后台生成一组密钥对


### 参考:

 [表单数据的加密传输](https://www.cnblogs.com/dcj1018/articles/3071386.html)